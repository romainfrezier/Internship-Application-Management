"use strict";(self.webpackChunkinternship_application_management=self.webpackChunkinternship_application_management||[]).push([[700],{5700:(D,b,i)=>{i.r(b),i.d(b,{ModelsModule:()=>H});var m=i(6895),$=i(7710),p=i(3060),t=i(4650),Z=i(1135),c=i(1005),f=i(4004),u=i(8505),C=i(3900),N=i(5698),F=i(9718),_=i(262),x=i(9646),h=i(2340),J=i(529);let M=(()=>{class e{constructor(o){this.http=o,this.maxId=0,this._loading$=new Z.X(!1),this._models$=new Z.X([]),this.lastModelsLoad=0}get loading$(){return this._loading$.asObservable()}get models$(){return this._models$.asObservable()}setLoadingStatus(o){this._loading$.next(o)}getModelsFromServer(){this.setLoadingStatus(!0);const o=(n,r)=>n.language<r.language?-1:n.language>r.language?1:0;this.http.get(`${h.N.apiUrl}/models`).pipe((0,c.g)(1e3),(0,f.U)(n=>n.sort(o)),(0,u.b)(n=>{this.lastModelsLoad=Date.now(),this._models$.next(n),this.setLoadingStatus(!1)}),(0,f.U)(n=>n.map(r=>{r.id>this.maxId&&(this.maxId=r.id,console.log(r.id))}))).subscribe()}getModelById(o){return this.lastModelsLoad||this.getModelsFromServer(),this.models$.pipe((0,f.U)(n=>n.filter(r=>r.id===o)[0]))}removeModel(o){this.setLoadingStatus(!0),this.http.delete(`${h.N.apiUrl}/models/${o}`).pipe((0,c.g)(1e3),(0,C.w)(()=>this.models$),(0,N.q)(1),(0,f.U)(n=>n.filter(r=>r.id!==o)),(0,u.b)(n=>{this._models$.next(n),this.setLoadingStatus(!1)})).subscribe()}saveModel(o){return this.http.post(`${h.N.apiUrl}/models`,o).pipe((0,F.h)(!0),(0,c.g)(1e3),(0,_.K)(()=>(0,x.of)(!1).pipe((0,c.g)(1e3))))}updateModel(o,n){return this.http.patch(`${h.N.apiUrl}/models/${o}`,n).pipe((0,F.h)(!0),(0,c.g)(1e3),(0,_.K)(()=>(0,x.of)(!1).pipe((0,c.g)(1e3))))}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(J.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();var l=i(3546),U=i(4859),I=i(7392),y=i(1572),A=i(266);function L(e,a){1&e&&t._UZ(0,"mat-spinner",4)}function P(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"mat-card",6)(1,"mat-card-title"),t._uU(2),t.qZA(),t.TgZ(3,"mat-card-subtitle"),t._uU(4),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.qZA(),t.TgZ(7,"button",7),t.NdJ("click",function(){const g=t.CHM(o).$implicit,T=t.oxw(2);return t.KtG(T.onDeleteModel(g.id))}),t.TgZ(8,"mat-icon",2),t._uU(9,"delete"),t.qZA()(),t.TgZ(10,"button",8),t.NdJ("click",function(){const g=t.CHM(o).$implicit,T=t.oxw(2);return t.KtG(T.onUpdateModel(g.id))}),t.TgZ(11,"mat-icon",2),t._uU(12,"edit"),t.qZA()()()}if(2&e){const o=a.$implicit;t.xp6(2),t.hij("Message pour ",o.sector,""),t.xp6(2),t.hij("Langage : ",o.language,""),t.xp6(2),t.Oqu(o.message)}}function B(e,a){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,P,13,3,"mat-card",5),t.qZA()),2&e){const o=a.ngIf;t.xp6(1),t.Q6J("ngForOf",o)}}let E=(()=>{class e{constructor(o,n){this.modelsService=o,this.router=n}ngOnInit(){this.initObservables(),this.modelsService.getModelsFromServer()}initObservables(){this.loading$=this.modelsService.loading$,this.models$=this.modelsService.models$}onNewModel(){this.router.navigateByUrl("/models/add")}onDeleteModel(o){confirm("Voulez vraiment supprimer ce model ?")&&this.modelsService.removeModel(o)}onUpdateModel(o){this.router.navigateByUrl(`models/update/${o}`)}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(M),t.Y36(p.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-models-list"]],decls:9,vars:6,consts:[["class","spinner",4,"ngIf"],["mat-flat-button","","color","primary","matTooltip","Ajouter un model","matTooltipPosition","right",3,"click"],[1,"btn_icon"],[4,"ngIf"],[1,"spinner"],["class","letter",4,"ngFor","ngForOf"],[1,"letter"],["mat-flat-button","","color","warn","matTooltip","Supprimer le model","matTooltipPosition","left",3,"click"],["mat-flat-button","","color","primary","matTooltip","Modifier le model","matTooltipPosition","right",3,"click"]],template:function(o,n){1&o&&(t.TgZ(0,"h1"),t._uU(1,"Models de lettres de motivation"),t.qZA(),t.YNc(2,L,1,0,"mat-spinner",0),t.ALo(3,"async"),t.TgZ(4,"button",1),t.NdJ("click",function(){return n.onNewModel()}),t.TgZ(5,"mat-icon",2),t._uU(6,"add"),t.qZA()(),t.YNc(7,B,2,1,"div",3),t.ALo(8,"async")),2&o&&(t.xp6(2),t.Q6J("ngIf",t.lcZ(3,2,n.loading$)),t.xp6(5),t.Q6J("ngIf",t.lcZ(8,4,n.models$)))},dependencies:[m.sg,m.O5,l.a8,l.n5,l.$j,U.lW,I.Hw,y.Ou,A.gM,m.Ov],styles:[".spinner[_ngcontent-%COMP%]{position:relative;margin-left:auto;margin-right:auto;left:0;right:0;text-align:center}.letter[_ngcontent-%COMP%]{margin-bottom:20px}button[_ngcontent-%COMP%]{margin-bottom:20px;margin-right:16px}.btn_icon[_ngcontent-%COMP%]{margin:auto 10px}"],changeDetection:0}),e})();var s=i(4006),d=i(989),v=i(9549),Y=i(4144),O=i(1948);function Q(e,a){1&e&&(t.TgZ(0,"mat-card-title"),t._uU(1,"Ajouter un nouveau model"),t.qZA())}function j(e,a){1&e&&(t.TgZ(0,"mat-card-title"),t._uU(1,"Modifier le model"),t.qZA())}function q(e,a){if(1&e&&(t.TgZ(0,"mat-radio-button",14),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.Q6J("value",o),t.xp6(1),t.Oqu(o)}}function G(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(o);const r=t.oxw(2);return t.KtG(r.onSubmitForm())}),t.TgZ(1,"mat-icon",12),t._uU(2,"save"),t.qZA()()}if(2&e){const o=t.oxw(2);t.Q6J("disabled",o.loading)}}function k(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(o);const r=t.oxw(2);return t.KtG(r.onSubmitForm())}),t.TgZ(1,"mat-icon",12),t._uU(2,"save"),t.qZA()()}if(2&e){const o=t.oxw(2);t.Q6J("disabled",o.loading)}}function w(e,a){if(1&e&&(t.TgZ(0,"mat-card-actions"),t.YNc(1,G,3,1,"button",15),t.YNc(2,k,3,1,"button",16),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",!o.currentModelId),t.xp6(1),t.Q6J("ngIf",o.currentModelId)}}function R(e,a){1&e&&t._UZ(0,"mat-spinner",19)}let S=(()=>{class e{constructor(o,n,r,g){this.formBuilder=o,this.modelsService=n,this.route=r,this.router=g,this.loading=!1}ngOnInit(){this.initForm(),this.sectorTypeOptions=[d.p.AI,d.p.RECRUITER,d.p.B2B,d.p.SECURTY,d.p.VIDEO_GAMES,d.p.FINANCE,d.p.WEB]}initForm(){"/models/add"===this.router.url?this.initAddForm():this.initUpdateForm()}initAddForm(){this.addModelForm=this.formBuilder.group({sector:["",s.kI.required],language:["",s.kI.required],message:["",s.kI.required]})}initUpdateForm(){this.model$=this.route.params.pipe((0,u.b)(o=>{this.currentModelId=+o.id}),(0,C.w)(o=>this.modelsService.getModelById(+o.id))),this.model$.pipe((0,u.b)(o=>{this.addModelForm=this.formBuilder.group({sector:[o.sector,s.kI.required],language:[o.language,s.kI.required],message:[o.message,s.kI.required]})})).subscribe()}onSubmitForm(){this.loading=!0,"/models/add"===this.router.url?this.saveModel():this.updateModel(),this.router.navigateByUrl("/models")}resetForm(){this.addModelForm.reset()}saveModel(){let o={...this.addModelForm.value,id:this.modelsService.maxId+1};this.modelsService.saveModel(o).pipe((0,u.b)(n=>{this.loading=!1,n?this.resetForm():console.log("An error as occurred during saving data")})).subscribe()}updateModel(){let o={...this.addModelForm.value,id:this.currentModelId};this.modelsService.updateModel(this.currentModelId,o).pipe((0,u.b)(n=>{this.loading=!1,n?this.resetForm():console.log("An error as occurred during saving data")})).subscribe()}onGoBack(){this.router.navigateByUrl("/models")}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(s.qu),t.Y36(M),t.Y36(p.gz),t.Y36(p.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-form"]],decls:31,vars:7,consts:[[3,"formGroup"],[4,"ngIf"],[1,"form-card"],["formControlName","sector",1,"radio-group"],[3,"value",4,"ngFor","ngForOf"],["formControlName","language",1,"radio-group"],["value","Fran\xe7ais"],["value","English"],[1,"form-row"],["appearance","fill"],["type","textarea","matInput","","formControlName","message"],["mat-flat-button","","color","primary","matTooltip","Retour","matTooltipPosition","right",3,"disabled","click"],[1,"btn_icon"],["class","spinner","color","primary","mode","indeterminate",4,"ngIf"],[3,"value"],["mat-flat-button","","color","primary","matTooltip","Enregister le nouveau model","matTooltipPosition","left",3,"disabled","click",4,"ngIf"],["mat-flat-button","","color","primary","matTooltip","Sauvegarder le model","matTooltipPosition","left",3,"disabled","click",4,"ngIf"],["mat-flat-button","","color","primary","matTooltip","Enregister le nouveau model","matTooltipPosition","left",3,"disabled","click"],["mat-flat-button","","color","primary","matTooltip","Sauvegarder le model","matTooltipPosition","left",3,"disabled","click"],["color","primary","mode","indeterminate",1,"spinner"]],template:function(o,n){1&o&&(t.TgZ(0,"mat-card",0),t.YNc(1,Q,2,0,"mat-card-title",1),t.YNc(2,j,2,0,"mat-card-title",1),t.TgZ(3,"mat-card",2)(4,"mat-card-subtitle"),t._uU(5,"Secteur"),t.qZA(),t.TgZ(6,"mat-radio-group",3),t.YNc(7,q,2,2,"mat-radio-button",4),t.qZA()(),t.TgZ(8,"mat-card",2)(9,"mat-card-subtitle"),t._uU(10,"Langage"),t.qZA(),t.TgZ(11,"mat-radio-group",5)(12,"mat-radio-button",6),t._uU(13,"Fran\xe7ais"),t.qZA(),t.TgZ(14,"mat-radio-button",7),t._uU(15,"English"),t.qZA()()(),t.TgZ(16,"mat-card",2)(17,"mat-card-subtitle"),t._uU(18,"Message"),t.qZA(),t.TgZ(19,"div",8)(20,"mat-form-field",9)(21,"mat-label"),t._uU(22,"Message"),t.qZA(),t._UZ(23,"textarea",10),t.TgZ(24,"mat-error"),t._uU(25,"Ce champ est requis"),t.qZA()()()(),t.YNc(26,w,3,2,"mat-card-actions",1),t.TgZ(27,"button",11),t.NdJ("click",function(){return n.onGoBack()}),t.TgZ(28,"mat-icon",12),t._uU(29,"arrow_back"),t.qZA()(),t.YNc(30,R,1,0,"mat-spinner",13),t.qZA()),2&o&&(t.Q6J("formGroup",n.addModelForm),t.xp6(1),t.Q6J("ngIf",!n.currentModelId),t.xp6(1),t.Q6J("ngIf",n.currentModelId),t.xp6(5),t.Q6J("ngForOf",n.sectorTypeOptions),t.xp6(19),t.Q6J("ngIf",n.addModelForm.valid),t.xp6(1),t.Q6J("disabled",n.loading),t.xp6(3),t.Q6J("ngIf",n.loading))},dependencies:[m.sg,m.O5,l.a8,l.n5,l.$j,l.hq,U.lW,I.Hw,v.TO,v.KE,v.hX,Y.Nt,O.VQ,O.U0,y.Ou,A.gM,s.Fj,s.JJ,s.JL,s.sg,s.u],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}mat-form-field.full-width[_ngcontent-%COMP%]{width:80%;margin-left:10%}.form-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.form-card[_ngcontent-%COMP%]{margin:20px 0}.radio-group[_ngcontent-%COMP%]{display:inline-flex;width:100%;height:60px;overflow-x:scroll}.mat-radio-button[_ngcontent-%COMP%] ~ .mat-radio-button[_ngcontent-%COMP%]{margin-left:16px}mat-card-actions[_ngcontent-%COMP%]{text-align:center}.main-form[_ngcontent-%COMP%]{padding-bottom:30px;position:relative}.spinner[_ngcontent-%COMP%]{position:absolute;margin-top:-50%;margin-left:auto;margin-right:auto;left:0;right:0;text-align:center}.btn_icon[_ngcontent-%COMP%]{margin:auto 10px}button[_ngcontent-%COMP%]{margin-right:16px}"]}),e})();const K=[{path:"",component:E},{path:"add",component:S},{path:"update/:id",component:S}];let z=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[p.Bz.forChild(K),p.Bz]}),e})(),H=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[M],imports:[m.ez,$.m,z]}),e})()}}]);